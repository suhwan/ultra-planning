---
phase: 01-project-structure
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - .ultraplan/config.json
  - .ultraplan/state/.gitkeep
  - .ultraplan/logs/.gitkeep
  - src/index.ts
autonomous: true

must_haves:
  truths:
    - ".ultraplan/ directory exists with proper structure"
    - "src/ directory exists with entry point"
    - "dist/ directory can be created by tsc"
  artifacts:
    - path: ".ultraplan/config.json"
      provides: "Default project configuration"
      contains: '"version":'
    - path: ".ultraplan/state/.gitkeep"
      provides: "State directory marker"
    - path: "src/index.ts"
      provides: "TypeScript entry point"
      min_lines: 5
  key_links:
    - from: "package.json"
      to: "src/index.ts"
      via: "main field points to compiled output"
      pattern: '"main":\\s*"dist/index.js"'
---

<objective>
Create the .ultraplan/ runtime directory structure and src/ source directory with minimal entry point.

Purpose: Establish the directory structure that will hold runtime state and source code. The .ultraplan/ directory follows the OMC mode-registry pattern for file-based state management.

Output: .ultraplan/ directory with config.json and state subdirectory, src/index.ts entry point that compiles successfully.
</objective>

<execution_context>
@/home/ubuntu/.claude/get-shit-done/workflows/execute-plan.md
@/home/ubuntu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-project-structure/01-RESEARCH.md
@.planning/phases/01-project-structure/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create .ultraplan/ directory structure</name>
  <files>.ultraplan/config.json, .ultraplan/state/.gitkeep, .ultraplan/logs/.gitkeep</files>
  <action>
Create the .ultraplan/ directory structure:

```
.ultraplan/
├── config.json            # Project configuration
├── state/                 # Runtime state
│   └── .gitkeep           # Ensure directory exists in git
└── logs/                  # Optional logs directory
    └── .gitkeep
```

Create config.json with default configuration:
```json
{
  "version": "0.1.0",
  "mode": "interactive",
  "depth": "standard",
  "parallelization": true,
  "max_workers": 5,
  "commit_docs": true,
  "model_profile": "balanced"
}
```

The .gitkeep files ensure empty directories are tracked by git.
  </action>
  <verify>ls -la .ultraplan/ && cat .ultraplan/config.json && ls -la .ultraplan/state/ && ls -la .ultraplan/logs/</verify>
  <done>.ultraplan/ directory exists with config.json and state/logs subdirectories</done>
</task>

<task type="auto">
  <name>Task 2: Create src/ directory with entry point</name>
  <files>src/index.ts</files>
  <action>
Create src/index.ts as the package entry point:

```typescript
/**
 * Ultra Planner - Document-driven workflow orchestration
 *
 * Entry point for the ultra-planner package.
 * Re-exports all public types and utilities.
 */

// Types will be exported from types.ts in Plan 03
// export * from './types.js';

// Placeholder export to make the module valid
export const VERSION = '0.1.0';
```

Note: The import uses `.js` extension per NodeNext resolution requirements.
The actual types export will be uncommented in Plan 03 after types.ts is created.
  </action>
  <verify>cat src/index.ts && test -f src/index.ts && echo "src/index.ts exists"</verify>
  <done>src/index.ts exists with VERSION export and placeholder for types</done>
</task>

<task type="auto">
  <name>Task 3: Verify compilation works</name>
  <files>dist/index.js, dist/index.d.ts</files>
  <action>
Run the TypeScript compiler to verify everything works:

```bash
npm run build
```

This should:
1. Create dist/ directory
2. Generate dist/index.js (compiled JavaScript)
3. Generate dist/index.d.ts (type declarations)
4. Generate dist/index.js.map (source map)
5. Generate dist/index.d.ts.map (declaration map)

If compilation fails, check:
- tsconfig.json rootDir matches src/
- tsconfig.json outDir matches dist/
- src/index.ts has valid TypeScript syntax
  </action>
  <verify>npm run build && ls -la dist/ && cat dist/index.js</verify>
  <done>npm run build succeeds and dist/ contains index.js and index.d.ts</done>
</task>

</tasks>

<verification>
Run the following commands to verify Phase 1 Plan 02 is complete:

```bash
# Verify .ultraplan/ structure
test -d .ultraplan && test -f .ultraplan/config.json && echo ".ultraplan/ OK"
test -d .ultraplan/state && echo ".ultraplan/state/ OK"
test -d .ultraplan/logs && echo ".ultraplan/logs/ OK"

# Verify src/ structure
test -f src/index.ts && echo "src/index.ts OK"

# Verify compilation
npm run build && test -f dist/index.js && echo "Build OK"
```
</verification>

<success_criteria>
- [ ] .ultraplan/ directory exists
- [ ] .ultraplan/config.json exists with valid JSON configuration
- [ ] .ultraplan/state/ directory exists
- [ ] .ultraplan/logs/ directory exists
- [ ] src/index.ts exists with VERSION export
- [ ] npm run build succeeds
- [ ] dist/index.js and dist/index.d.ts exist
</success_criteria>

<output>
After completion, create `.planning/phases/01-project-structure/01-02-SUMMARY.md`
</output>
