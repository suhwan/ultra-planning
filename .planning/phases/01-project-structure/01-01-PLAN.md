---
phase: 01-project-structure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
autonomous: true

must_haves:
  truths:
    - "npm install succeeds without errors"
    - "tsc --version returns TypeScript 5.7+"
    - "package.json has type: module for ESM support"
  artifacts:
    - path: "package.json"
      provides: "Project manifest with ESM configuration"
      contains: '"type": "module"'
    - path: "tsconfig.json"
      provides: "TypeScript compilation configuration"
      contains: '"module": "NodeNext"'
  key_links:
    - from: "package.json"
      to: "tsconfig.json"
      via: "build script references tsc"
      pattern: '"build":\\s*"tsc"'
---

<objective>
Create the TypeScript project configuration files (package.json and tsconfig.json) that form the foundation for Ultra Planner v2.

Purpose: Establish a modern ESM TypeScript project that can compile with `npm run build`. This is the foundation all other phases depend on.

Output: package.json with ESM configuration, tsconfig.json with NodeNext resolution, node_modules/ with dependencies installed.
</objective>

<execution_context>
@/home/ubuntu/.claude/get-shit-done/workflows/execute-plan.md
@/home/ubuntu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-project-structure/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create package.json with ESM configuration</name>
  <files>package.json</files>
  <action>
Create package.json with the following configuration:
- name: "ultra-planner"
- version: "0.1.0"
- description: "Document-driven workflow orchestration for Claude Code"
- type: "module" (CRITICAL for ESM)
- main: "dist/index.js"
- types: "dist/index.d.ts"
- exports field with import and types paths
- scripts: build (tsc), dev (tsc --watch), test (vitest run), typecheck (tsc --noEmit)
- engines: node >=22.0.0
- dependencies: zod ^3.25.0
- devDependencies: @types/node ^22.0.0, typescript ^5.7.0, vitest ^4.0.0

Use the exact template from 01-RESEARCH.md Code Examples section.
  </action>
  <verify>cat package.json && grep '"type": "module"' package.json</verify>
  <done>package.json exists with "type": "module" and all required scripts</done>
</task>

<task type="auto">
  <name>Task 2: Create tsconfig.json with NodeNext resolution</name>
  <files>tsconfig.json</files>
  <action>
Create tsconfig.json with the following configuration:
- target: "ES2022"
- module: "NodeNext"
- moduleResolution: "NodeNext"
- lib: ["ES2022"]
- types: ["node"]
- outDir: "./dist"
- rootDir: "./src"
- strict: true (CRITICAL for type safety)
- esModuleInterop: true
- skipLibCheck: true
- forceConsistentCasingInFileNames: true
- declaration: true
- declarationMap: true
- sourceMap: true
- resolveJsonModule: true
- include: ["src/**/*"]
- exclude: ["node_modules", "dist"]

Use the exact template from 01-RESEARCH.md Code Examples section.
  </action>
  <verify>cat tsconfig.json && grep '"module": "NodeNext"' tsconfig.json</verify>
  <done>tsconfig.json exists with NodeNext module resolution and strict mode enabled</done>
</task>

<task type="auto">
  <name>Task 3: Install dependencies</name>
  <files>node_modules/, package-lock.json</files>
  <action>
Run npm install to install all dependencies:
- This will create node_modules/ directory
- This will create package-lock.json
- Verify TypeScript version is 5.7+
- Verify Zod is installed

After installation, verify TypeScript is accessible:
```bash
npx tsc --version
```

Expected output: Version 5.7.x or higher
  </action>
  <verify>npm ls typescript && npm ls zod && npx tsc --version</verify>
  <done>node_modules/ exists with typescript 5.7+ and zod 3.25+</done>
</task>

</tasks>

<verification>
Run the following commands to verify Phase 1 Plan 01 is complete:

```bash
# Verify package.json exists and has correct type
test -f package.json && grep -q '"type": "module"' package.json && echo "package.json OK"

# Verify tsconfig.json exists and has correct module
test -f tsconfig.json && grep -q '"module": "NodeNext"' tsconfig.json && echo "tsconfig.json OK"

# Verify dependencies installed
test -d node_modules && echo "node_modules OK"

# Verify TypeScript version
npx tsc --version
```
</verification>

<success_criteria>
- [ ] package.json exists with "type": "module"
- [ ] tsconfig.json exists with "module": "NodeNext" and "strict": true
- [ ] npm install completed without errors
- [ ] npx tsc --version returns 5.7+
- [ ] All scripts defined: build, dev, test, typecheck
</success_criteria>

<output>
After completion, create `.planning/phases/01-project-structure/01-01-SUMMARY.md`
</output>
